using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

/**
 * a Corporate is a collection of buildings.
 * */
namespace Game.City_Generator
{
    class Corporate
    {
     //   static int counter = 0;
        /********************************Fields***************************************/
        private List<Building> _buildings;


        /********************************Constructor***************************************/        
        internal Corporate() {

        private readonly int id;
        
        internal Corporate(int _id) {
           // counter++;
            _buildings = new List<Building>();
            this.id = _id;
        }


        /********************************Simple Methods***************************************/   
        internal void addBuilding (Building b){
            _buildings.Add(b);
        }

        internal void removeBuilding(Building b) {
            _buildings.Remove(b);
        }

        internal bool CanBuild(Building b) { 
            if (b.Corp != this) return false;
            foreach (Building other in _buildings)
                if (b.Owner != other.Owner)
                    return false;
            return true;
        }
      /*  internal static void print() {
            Console.Out.WriteLine("count: " + counter);
        }*/
        internal List<Building> Buildings{
            get { return _buildings; }
        }


        /**
         * This method merges the "other" corporate into the current one.
         * after this method is done, other corporate will still exist, but will be empty (so it's better to remove him)
         * */
        internal void takeover(Corporate other) {
            if (other == this)
                return;
         //   Console.Out.WriteLine("merging!");
          //  counter--;
            while (other.Buildings.Count>0)
                other.Buildings.First().joinCorp(this);
        }


        public int Id
        {
            get { return id; }
        } 


        public override bool Equals(object obj)
        {
            return ((obj is Corporate) && (((Corporate)obj).Id == this.Id));
        }

    }
}
